<!DOCTYPE HTML>
<html lang="zh-CN" class="sidebar-visible no-js light">

<head>
    <!-- Book generated using mdBook -->
    <meta charset="UTF-8">
    <title>Advanced: Sampling - NovelAI 帮助文档</title>


    <!-- Custom HTML head -->
    
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta name="description" content="NovelAI text and image generation documentation and guidebook.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#ffffff" />



    <link rel="icon" href="./favicon.svg">
    <link rel="shortcut icon" href="./favicon.png">
    <link rel="stylesheet" href="./css/variables.css">
    <link rel="stylesheet" href="./css/general.css">
    <link rel="stylesheet" href="./css/chrome.css">

    <!-- Fonts -->
    <link rel="stylesheet" href="./css/font-awesome.css">
    <link rel="stylesheet" href="./fonts/fonts.css">

    <link
        href="./fonts/css2?family=Eczar:wght@400;600&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"
        rel="stylesheet" />

    <!-- Highlight.js Stylesheets -->
    <link rel="stylesheet" href="./highlight.css">
    <link rel="stylesheet" href="./tomorrow-night.css">
    <link rel="stylesheet" href="./ayu-highlight.css">

    <!-- Custom theme stylesheets -->

</head>

<body>
    <!-- Provide site root to javascript -->
    <script type="text/javascript">
        var path_to_root = "./";
        var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "light" : "light";
    </script>

    <!-- Work around some values being stored in localStorage wrapped in quotes -->
    <script type="text/javascript">
        try {
            var theme = localStorage.getItem('mdbook-theme');
            var sidebar = localStorage.getItem('mdbook-sidebar');

            if (theme.startsWith('"') && theme.endsWith('"')) {
                localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
            }

            if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
            }
        } catch (e) { }
    </script>

    <!-- Set the theme before any content is loaded, prevents flash -->
    <script type="text/javascript">
        var theme;
        try { theme = localStorage.getItem('mdbook-theme'); } catch (e) { }
        if (theme === null || theme === undefined) { theme = default_theme; }
        var html = document.querySelector('html');
        html.classList.remove('no-js')
        html.classList.remove('light')
        html.classList.add(theme);
        html.classList.add('js');
    </script>

    <!-- Hide / unhide sidebar before it is displayed -->
    <script type="text/javascript">
        var html = document.querySelector('html');
        var sidebar = 'hidden';
        if (document.body.clientWidth >= 1080) {
            try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch (e) { }
            sidebar = sidebar || 'visible';
        }
        html.classList.remove('sidebar-visible');
        html.classList.add("sidebar-" + sidebar);
    </script>

    <nav id="sidebar" class="sidebar" aria-label="Table of contents">
        <div class="sidebar-scrollbox">
            <h1 class="menu-title">
                <div class="nai-icon"><svg width="118" height="143" viewBox="0 0 118 143" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M19.8521 111.571C14.9909 103.761 9.08889 97.2271 2.14617 92.6282C-0.129986 91.1205 -0.706675 87.8117 0.95396 85.6446C13.8489 68.8166 33.5273 26.658 44.3824 2.38697C46.1611 -1.58993 52.2575 -0.299101 52.2575 4.05743V66.4942C46.5492 69.0238 42.5672 74.7394 42.5672 81.385C42.5672 83.5935 43.0069 85.6993 43.8037 87.6196L19.8521 111.571ZM25.715 122.679C28.0868 127.99 30.0808 133.658 31.697 139.54C32.1833 141.31 33.7773 142.562 35.6127 142.562H58.8468H82.0808C83.9163 142.562 85.5102 141.31 85.9966 139.54C87.6127 133.658 89.6067 127.99 91.9784 122.679L79.7125 110.413L69.4523 120.674C69.6143 121.419 69.6996 122.194 69.6996 122.988C69.6996 128.982 64.8405 133.841 58.8466 133.841C52.8527 133.841 47.9937 128.982 47.9937 122.988C47.9937 116.994 52.8527 112.135 58.8466 112.135C59.5269 112.135 60.1925 112.198 60.838 112.317L71.2272 101.928L65.5319 96.2328C63.4923 97.1526 61.2292 97.6645 58.8466 97.6645C56.4639 97.6645 54.2007 97.1526 52.1611 96.2327L25.715 122.679ZM97.8412 111.571C102.702 103.761 108.605 97.2272 115.547 92.6282C117.824 91.1205 118.4 87.8117 116.74 85.6446C103.845 68.8166 84.1663 26.658 73.3111 2.38697C71.5325 -1.58993 65.4361 -0.299101 65.4361 4.05743V66.4944C71.1441 69.0241 75.126 74.7396 75.126 81.385C75.126 83.5936 74.6862 85.6994 73.8894 87.6198L83.9552 97.6855L97.8412 111.571Z"
                            fill="white" />
                    </svg>
                </div>
                <a href="./index.html">NovelAI 帮助文档</a>
            </h1>
            <ol class="chapter"><li class="chapter-item expanded "><a href="./index.html">图像生成</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="basics.html">基本操作</a></li><li class="chapter-item expanded "><a href="models.html">模型（Models）</a></li><li class="chapter-item expanded "><a href="tags.html">Tag的使用</a></li><li class="chapter-item expanded "><a href="strengthening-weakening.html">增减Tag权重</a></li><li class="chapter-item expanded "><a href="qualitytags.html">添加质量标签</a></li><li class="chapter-item expanded "><a href="undesiredcontent.html">不需要的特征（Undesired Content）</a></li><li class="chapter-item expanded "><a href="stepsguidance.html">迭代步数（Steps）与提示词（Prompt）</a></li><li class="chapter-item expanded "><a href="seed.html">种子（Seed）</a></li><li class="chapter-item expanded "><a href="controltools.html">图生图（Image2Image）与控制工具</a></li><li class="chapter-item expanded "><a href="strengthnoise.html">不相似度（Strength）与噪声（Noise）</a></li><li class="chapter-item expanded "><a href="editimagecanvas.html">画布（Canvas）</a></li><li class="chapter-item expanded "><a href="enhance.html">增强图像（Enhance）</a></li><li class="chapter-item expanded "><a href="upscale.html"><del>Upscale</del></a></li><li class="chapter-item expanded "><a href="inpaint.html"><del>Inpaint</del></a></li><li class="chapter-item expanded "><a href="history.html">历史记录（History）</a></li><li class="chapter-item expanded "><a href="promptmixing.html">高级：混合提示词（Prompt Mixing）</a></li><li class="chapter-item expanded "><a href="sampling.html" class="active">高级：采样（Sampling）</a></li></ol></li><li class="chapter-item expanded "><a href="./misc.html"><del>杂项</del></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="./uifunctionalities.html"><del>Extra UI Functionalities</del></a></li></ol></li><li class="chapter-item expanded "><a href="faq.html">常见问题</a></li><li class="chapter-item expanded "><a href="./subscription.html">订阅</a></li></ol>
        </div>
        <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
    </nav>

    <div id="page-wrapper" class="page-wrapper">

        <div class="page">
                        <div id="menu-bar-hover-placeholder"></div>
            <div id="menu-bar" class="menu-bar sticky bordered">
                <div class="left-buttons">
                    <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents"
                        aria-label="Toggle Table of Contents" aria-controls="sidebar">
                        <i class="fa fa-bars"></i>
                    </button>
                    <button id="theme-toggle" class="icon-button" type="button" title="Change theme"
                        aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                        <i class="fa fa-paint-brush"></i>
                    </button>
                    <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                        <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button>
                        </li>
                    </ul>
                </div>

                <div class="right-buttons">

                </div>
            </div>

            <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
            <script type="text/javascript">
                document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                Array.from(document.querySelectorAll('#sidebar a')).forEach(function (link) {
                    link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                });
            </script>

            <div id="content" class="content">
                <main>
                    <h1 id="sampling-methods"><a class="header" href="sampling.html#sampling-methods">Sampling Methods</a></h1>
<p>For image generation, <strong>Samplers</strong> are used to tell the AI how it should start generating visual patterns from the initial noise.<br />
NovelAI supports a wide variety of <strong>Sampling Methods</strong>:<br />
<strong>DPM++ 2M</strong>, <strong>Euler Ancestral</strong>, Euler, DPM2, DPM++ 2S Ancestral, DPM++ SDE, DPM Fast, and DDIM.</p>
<p>Different <strong>Samplers</strong> generate different images, but the differences may not always be obvious or predictable.</p>
<p><img src="./assets/samplerfromnoise.png" alt="Sampler comparison." /></p>
<div class="goosetip">
<p>小贴士： It's easier to see the differences between <strong>Samplers</strong> on images with very low <strong>Steps</strong> values. But such low values aren't recommended for normal image generation.</p>
</div>
<p><strong>DPM++ 2M</strong> and <strong>Euler_Ancestral</strong> are our recommended samplers, due to their consistent, high-quality generations in combination with NovelAI Diffusion. We highly recommend leaving the <strong>Sampler</strong> setting as is, unless you have a deeper knowledge of Image Generation.</p>
<h2 id="special-samplers-smea--smea-dyn"><a class="header" href="sampling.html#special-samplers-smea--smea-dyn">Special Samplers: SMEA &amp; SMEA DYN</a></h2>
<h3 id="what-is-nai-smea"><a class="header" href="sampling.html#what-is-nai-smea">What is NAI SMEA?</a></h3>
<p><strong>S</strong>inusoidal <strong>M</strong>ultipass <strong>E</strong>uler <strong>A</strong>ncestral (<strong>SMEA</strong>) is a new sampler developed with the goal of improving overall coherency and quality, especially at higher resolutions. Based on the Euler ancestral sampler, we created a new sine-based schedule that interpolates between multiple passes of the regular diffusion model as sampling progresses. This approach ensures that <em>Stable Diffusion</em> attends to both local and global features. Oftentimes when sampling at higher resolutions with the conventional samplers, <em>Stable Diffusion</em> can produce repeats of the same subjects or bizarre anatomy, this is largely due to poor global attention at higher resolutions <strong>NAI SMEA</strong> aims to solve that.</p>
<p><strong>All the normal samplers have SMEA versions and SMEA DYN variants.</strong><br />
<em>(Except for the DDIM sampler, which doesn't support SMEA.)</em></p>
<h3 id="smea--smea-dyn-are-perfect-for-higher-resolutions"><a class="header" href="sampling.html#smea--smea-dyn-are-perfect-for-higher-resolutions">SMEA &amp; SMEA DYN are perfect for higher resolutions!</a></h3>
<p>The differences between these two samplers variations are most obvious for higher resolution images. While both work better than normal samplers for high resolution image generation, <strong>SMEA DYN</strong> focuses less time on lower generations and begins to shine dynamically in the mid to high range of a generation. We've noticed slightly more refined compositions.<br />
Ultimately, the effectiveness of each sampler will depend on the specific use case and image resolution.</p>
<h3 id="pricing"><a class="header" href="sampling.html#pricing">Pricing:</a></h3>
<p><strong>Why is SMEA more expensive?</strong><br />
<strong>SMEA</strong> samplers run multiple passes of the <em>Unet</em> during each step. It costs slightly more than the normal samplers based on the increased compute cost, the increase is relative to the increased amount of time it takes the GPU to process a request.</p>
<h3 id="auto-smea-toggle-option"><a class="header" href="sampling.html#auto-smea-toggle-option">Auto SMEA Toggle Option</a></h3>
<p><img src="./assets/autonaismea.png" alt="Auto nai_smea toggle" /></p>
<p>There is a default option to <strong>Auto</strong> apply <strong>SMEA</strong> for images over 1024x1024 and above pixels, so you don't have to worry about when you should or shouldn't use it.</p>
<div class="goosetip">
<p>小贴士： With the <strong>Auto</strong> setting enabled, you can still easily swap between using just <strong>SMEA</strong> or <strong>SMEA DYN</strong>. You can also disable the <strong>Auto</strong> toggle and generate high resolution images without <strong>SMEA</strong>, but it's not recommended!</p>
</div>
<h3 id="tips"><a class="header" href="sampling.html#tips">Tips:</a></h3>
<p><strong>SMEA</strong> and <strong>SMEA DYN</strong> samplers react differently to the Step and Prompt Guidance settings. For example, the Guidance values can go much higher before becoming unpredictable. You may want to increase the Guidance value if you are generating at higher resolutions.</p>
<p>If you have a particularly short prompt that seemingly performs badly, you can try copy-pasting it into the prompt field repeatedly. We've noted that this can solve issues during testing.</p>
<p>Sometimes the sampler may focus on different aspects of your prompt that differ from the previous defaults:<br />
You can alleviate this with emphasis and de-emphasizing aspects of your prompt.<br />
(See <a href="strengthening-weakening.html">Strengthening &amp; Weakening Vectors</a>)</p>
<p>We recommend experimenting to find your preferred values with samplers!</p>
<h3 id="sampler-comparisons"><a class="header" href="sampling.html#sampler-comparisons">Sampler Comparisons</a></h3>
<p>These high resolution images were all generated using the same prompt, settings and seed. The only differences between them were the <strong>Samplers</strong> as well as the <strong>SMEA</strong> and <strong>DYN</strong> toggles.</p>
<p><img src="./assets/naismeacomparisons.png" alt="NAI SMEA comparison." /></p>

                </main>

                <nav class="nav-wrapper" aria-label="Page navigation">
                    <!-- Mobile navigation buttons -->
                    <a rel="prev" href="promptmixing.html" class="mobile-nav-chapters previous"
                        title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="./misc.html" class="mobile-nav-chapters next"
                        title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>

                    <div style="clear: both"></div>
                </nav>
            </div>
        </div>

        <nav class="nav-wide-wrapper" aria-label="Page navigation">
            <a rel="prev" href="promptmixing.html" class="nav-chapters previous" title="Previous chapter"
                aria-label="Previous chapter" aria-keyshortcuts="Left">
                <i class="fa fa-angle-left"></i>
            </a>

            <a rel="next" href="./misc.html" class="nav-chapters next" title="Next chapter"
                aria-label="Next chapter" aria-keyshortcuts="Right">
                <i class="fa fa-angle-right"></i>
            </a>
        </nav>

    </div>




    <script type="text/javascript">
        window.playground_copyable = true;
    </script>



    <script src="./clipboard.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="./highlight.js" type="text/javascript" charset="utf-8"></script>
    <script src="./book.js" type="text/javascript" charset="utf-8"></script>

    <!-- Custom JS scripts -->


</body>

</html>
